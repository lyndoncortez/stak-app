<div class="d-flex flex-column dashboard">
  <h1>Search Stocks</h1>
  <div class="w-50 mt-3 mb-4">
    <%= form_with method: :post, url: stocks_create_path , local:true do |f| %>
    <div class=" input-group input-group-sm">
      <%= f.text_field :symbol, :class => 'form-control search-bar fs-5 ps-3', placeholder: 'Search by stock' %>
      <span class="input-group-text bg-dark border-dark" id="basic-addon2">
      <%= f.button :button, :class => 'btn btn-sm' do %>
        <lord-icon
          src="https://cdn.lordicon.com/msoeawqm.json"
          trigger="hover"
          colors="primary:#ffffff,secondary:#16c72e"
          stroke="100"
          scale="64"
          style="width:32px;height:32px">
        </lord-icon>
      <% end %>
      </span>
    </div>
    <% end %>
  </div>
  <div class="mt-2 card">
    <div class="card-body p-4">
      <h1><%= number_to_currency(@stock.latest_price) %></h1>
      <div class="d-flex justify-content-between">
        <div>
          <p class="stock-change stock-<%= @gain_loss %>"><%= number_to_currency(@stock.change) %> (<%= @stock.percent %>) <span class="text-secondary">TODAY</span></p>
        </div>
        <div>
          <h5 class="text-end"><%= @stock.symbol.upcase %></h5>
          <h6 class="text-secondary"><%= @stock.name %></h6>
        </div>
      </div>
      <hr>
      <div class="row mt-5">
        <div class="col-6">
          <h5 class="fw-bolder">Stats</h5>
          <div class="row mb-3 mt-3">
            <div class="col-3">
              <small class="fw-bold text-secondary">OPEN</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
                <% if !(@stock.ohlc_high.nil?)%>
                  <%= number_to_currency(@stock.ohlc_open) %>
                <% else %>
                  -
                <% end %>
              </small>
            </div>
            <div class="col-3">
              <small class="fw-bold text-secondary">VOLUME</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
              <% if !(@stock.volume.nil?)%>
                <%= number_to_human(@stock.volume, :format => '%n %u', :units => { :thousand => 'K', :million => 'M', :billion => 'B' }) %>
              <% else %>
                -
              <% end %>   
              </small>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-3">
              <small class="fw-bold text-secondary">HIGH</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
                <% if !(@stock.ohlc_high.nil?)%>
                  <%= number_to_currency(@stock.ohlc_high) %>
                <% else %>
                  -
                <% end %>
              </small>
            </div>
            <div class="col-3">
              <small class="fw-bold text-secondary">AVG.VOLUME</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
              <% if !(@stock.avg_volume.nil?)%>
                <%= number_to_human(@stock.avg_volume, :format => '%n %u', :units => { :thousand => 'K', :million => 'M', :billion => 'B' }) %>
              <% else %>
               -
              <% end %>
              </small>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-3">
              <small class="fw-bold text-secondary">LOW</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
                <% if !(@stock.ohlc_high.nil?)%>
                  <%= number_to_currency(@stock.ohlc_low) %>
                <% else %>
                  -
                <% end %>
              </small>
            </div>
            <div class="col-3">
              <small class="fw-bold text-secondary">MKT CAP</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
              <% if !(@stock.mkt_cap.nil?)%>
                <%= number_to_human(@stock.mkt_cap, :format => '%n %u', :units => { :thousand => 'K', :million => 'M', :billion => 'B' }) %>
              <% else %>
                -
              <% end %>
              </small>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-3">
              <small class="fw-bold text-secondary">52 WK HIGH</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
              <% if !(@stock.wk_high.nil?)%>
                <%= number_to_currency(@stock.wk_high) %>
              <% else %>
                -
              <% end %>
              </small>
            </div>
            <div class="col-3">
              <small class="fw-bold text-secondary">P/E RATIO</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
              <% if !(@stock.pe_ratio.nil?)%>
                <%= @stock.pe_ratio %>
              <% else %>
                -
              <% end %>
              </small>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-3">
              <small class="fw-bold text-secondary">52 WK LOW</small>
            </div>
            <div class="col-3">
              <small class="fw-bold">
              <% if !(@stock.wk_low.nil?)%>
                <%= number_to_currency(@stock.wk_low) %>
              <% else %>
                -
              <% end %>
              </small>
            </div>
          </div>
        </div>
        <div class="col-6">
          <h5>About</h5>
          <div>
            <small class="fs-6 text-secondary">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
